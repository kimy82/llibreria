{% extends 'AcmeStoreBundle::layoutFrontend.html.twig' %}

{% block title %}Llibreria 22@{% endblock %}

{% block content_header '' %}
{% block content %}
	<script type="text/javascript" src="{{ asset('bundles/acmestore/js/frontendGaleria.js') }}" ></script>
    {% set version = constant('Symfony\\Component\\HttpKernel\\Kernel::MAJOR_VERSION') ~ '.' ~ constant('Symfony\\Component\\HttpKernel\\Kernel::MINOR_VERSION')%}

    <h1 class="title">{% trans %}f_galeria_title{% endtrans %}</h1>
    	
    	
    	{% if pagination|length >0 %}
    		<div class="menu_years_galeria">
    		<ul>
   			<li><a href="#" onclick="searchFotosYear('{{dates[0]}}')" >{{dates[0]}}</a></li>
   			<li><a href="#" onclick="searchFotosYear('{{dates[1]}}')" >{{dates[1]}}</a></li>
   			<li><a href="#" onclick="searchFotosYear('{{dates[2]}}')" >{{dates[2]}}</a></li>
   			<li><a href="#" onclick="searchFotosYear('{{dates[3]}}')" >{{dates[3]}}</a></li>
   			<li><a href="#" onclick="searchFotosYear('{{dates[4]}}')" >{{dates[4]}}</a></li>
   			</ul>
   			</div>
   			<div style="float:left;">
   			<ul>
    		{% for galeria in pagination %}
    			<script>
    				galeriaManagerObj.saveInfo({{ galeria.id}},"{{ galeria.titol}}","{{ galeria.subtitol}}","{{ galeria.description}}","{{ galeria.dataEntrada|date('Y-m-d')}}");    				
    			</script>
    			<li id="{{ galeria.id}}"> <a href="#" onclick="galeriaManagerObj.showFotoDesc({{ galeria.id}})"> <img id="img_{{ galeria.id}}" src="{{path}}{{ galeria.attachment}}" width="100px" /></a> </li> 
    		{% endfor %}
    		</ul>
    		</div>
    		<div class="pagerfanta" >
    			{{knp_pagination_render(pagination)}}
    		</div>
    	{% else %}
    		<div class="menu_years_galeria">
    		<ul>
   			<li><a href="#" onclick="searchFotosYear('{{dates[0]}}')" >{{dates[0]}}</a></li>
   			<li><a href="#" onclick="searchFotosYear('{{dates[1]}}')" >{{dates[1]}}</a></li>
   			<li><a href="#" onclick="searchFotosYear('{{dates[2]}}')" >{{dates[2]}}</a></li>
   			<li><a href="#" onclick="searchFotosYear('{{dates[3]}}')" >{{dates[3]}}</a></li>
   			<li><a href="#" onclick="searchFotosYear('{{dates[4]}}')" >{{dates[4]}}</a></li>
   			</ul>
   			</div>
    	 	<p>- There are no things </p>
    	{% endif %}
    	
        {% if app.environment == 'dev' %}
           DEV
        {% endif %}
       <script>
		    $('li').removeClass('active');
		    $('#galeriali').addClass('active');
			function searchFotosYear(year){
				var path="{{pathlocal}}";
				window.localStorage.setItem('year',year);
				window.location.href=path+"/llibreria22/galeria/"+year;
			}
			var titolval=window.localStorage.getItem('val_titol');
			var subtitolval=window.localStorage.getItem('val_subtitol');
			if(titolval!=null){
				document.getElementById('titol').value=titolval;
			}
			
			if(subtitolval!=null){
				document.getElementById('subtitol').value=subtitolval;
			}
		
		</script>
		<!-- pagina per els dialogs -->

		<div  id="divCargando" class="divCargando">
		</div>
		<div id="divCargandoImg" class="divCargandoImg">
		  <a href="#" onclick="inicio()" >{% trans %}f_galeria_botton_cerrar{% endtrans %}</a>
		  <label id="titol_foto" ></label>
		  <label id="subtitol_foto" ></label>
		  <a href="#" onclick="galeriaManagerObj.previous()" ><</a>
		  <img  id ="img_id" src="" />
		  <a href="#" onclick="galeriaManagerObj.next()" >></a>
		  <label id="desc_foto" ></label>
		</div>
		 <script>
			inicio();
		</script>
{% endblock %}
